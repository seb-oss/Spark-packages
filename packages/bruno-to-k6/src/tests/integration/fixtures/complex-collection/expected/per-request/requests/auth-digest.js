// generated by @sebspark/bruno-to-k6
import http from 'k6/http'
import { check } from 'k6'
import { usingBruno } from '@sebspark/bruno-to-k6/runtime'

export function run({ ENV, VARS } = {}) {
  const { bru, req, parse } = usingBruno({ env: ENV, vars: VARS })

  // GET https://example.test/digest
  const res = http.request(
    'GET',
    parse.url('https://example.test/digest'),
    undefined,
    parse.params({headers: {Authorization: 'Digest ${bru.digestAuth(ENV, 'alice', 'secret')}'}}),
  )
  check(res, {'status < 400': r => r.status < 400})
}
